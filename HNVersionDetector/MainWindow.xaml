<Window x:Class="HelloNeighborVersionDetector.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        SizeToContent="Height"
        MinHeight="280"
        Width="400"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ShowInTaskbar="True">
    <Window.Resources>
        <!-- Minimize Animation -->
        <Storyboard x:Key="MinimizeAnimation">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                           From="1" To="0.5"
                           Duration="0:0:0.15"/>
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                           From="1" To="0.9"
                           Duration="0:0:0.15"/>
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                           From="1" To="0.9"
                           Duration="0:0:0.15"/>
        </Storyboard>
        <!-- Close Animation -->
        <Storyboard x:Key="CloseAnimation">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                           From="1" To="0"
                           Duration="0:0:0.15"/>
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                           From="1" To="0.3"
                           Duration="0:0:0.15"/>
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                           From="1" To="0.3"
                           Duration="0:0:0.15"/>
        </Storyboard>
        <!-- Restore Animation -->
        <Storyboard x:Key="RestoreAnimation">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                           To="1"
                           Duration="0:0:0.1"/>
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                           To="1"
                           Duration="0:0:0.1"/>
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                           To="1"
                           Duration="0:0:0.1"/>
        </Storyboard>

        <!-- Custom Button Style for Details Button -->
        <Style x:Key="DetailsButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="5">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                            VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                            Margin="{TemplateBinding Padding}"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Foreground" Value="#ffffff"/>
                </Trigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#708CA3"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#5A7A8F"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    <Window.RenderTransform>
        <ScaleTransform ScaleX="1" ScaleY="1" CenterX="200" CenterY="140"/>
    </Window.RenderTransform>
    <Border CornerRadius="10" Background="#2D2D2D">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <!-- Title Bar -->
            <Border Grid.Row="0" Background="#1F1F1F" CornerRadius="10,10,0,0" Padding="10,5">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <!-- Title -->
                    <TextBlock Grid.Column="0"
                               Text="Hello Neighbor Version Detector"
                               Foreground="White"
                               FontSize="14"
                               FontWeight="Bold"
                               VerticalAlignment="Center"
                               MouseLeftButtonDown="TitleBar_MouseLeftButtonDown"/>
                    <!-- Window Controls -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button Content="─"
                                FontSize="14"
                                FontWeight="Bold"
                                Width="30"
                                Height="25"
                                Background="Transparent"
                                BorderThickness="0"
                                Foreground="White"
                                Click="MinimizeButton_Click"
                                ToolTip="Minimize"/>
                    </StackPanel>
                    <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button Content="✕"
                                FontSize="12"
                                FontWeight="Bold"
                                Width="30"
                                Height="25"
                                Background="Transparent"
                                BorderThickness="0"
                                Foreground="White"
                                Click="CloseButton_Click"
                                ToolTip="Close"/>
                    </StackPanel>
                </Grid>
            </Border>
            <!-- Detect Version Button -->
            <Border Grid.Row="1" Margin="20,10,20,5" CornerRadius="5" Background="#4285F4">
                <Button x:Name="DetectButton"
                        Content="Detect Version"
                        FontSize="14"
                        FontWeight="Bold"
                        Foreground="White"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="DetectButton_Click"
                        Padding="10,5"
                        HorizontalContentAlignment="Center"
                        VerticalContentAlignment="Center"/>
            </Border>
            <!-- Details Button -->
            <Border Grid.Row="2" Margin="20,5,20,5" CornerRadius="5" Background="#607D8B">
                <Button x:Name="DetailsButton"
                        Content="Details"
                        Click="DetailsButton_Click"
                        IsEnabled="False"
                        Style="{StaticResource DetailsButtonStyle}"/>
            </Border>
            <!-- Detected Version Box -->
            <Border Grid.Row="3" Margin="20,5,20,10" CornerRadius="5" Background="#4D4D4D" Padding="10">
                <TextBlock x:Name="ResultText"
                           Foreground="White"
                           FontSize="14"
                           TextAlignment="Center"
                           FontWeight="SemiBold"
                           TextWrapping="Wrap"
                           Text="Press the button to detect the version."/>
            </Border>
        </Grid>
    </Border>
</Window>